services:
  # Development shell - interactive development
  dev:
    build:
      context: .
      dockerfile: docker/Dockerfile
    volumes:
      - .:/app
      - arcgis-cache:/root/.cache
      - your/path/to/repositories:/app/repositories
    env_file:
      - .env
    stdin_open: true
    tty: true
    command: /bin/bash

  # Run a specific app
  app:
    build:
      context: .
      dockerfile: docker/Dockerfile
    volumes:
      - ./apps:/app/apps
      - ./configs:/app/configs
      - your/path/to/repositories:/app/repositories
    env_file:
      - .env
    command: python apps/${APP_GROUP}/${APP_NAME}/main.py

  # Jupyter notebook for exploration
  notebook:
    image: ghcr.io/esri/arcgis-python-api-notebook
    ports:
      - "8888:8888"
    volumes:
      - .:/home/jovyan/work
    env_file:
      - .env

volumes:
  arcgis-cache:


